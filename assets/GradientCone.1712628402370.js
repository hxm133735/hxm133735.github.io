import{i as d}from"./initCesium.1712628402370.js";import{_ as h}from"./index.1712628402370.js";import{l as p,a as v,o as C}from"./vue.1712628402370.js";import"./cesium.1712628402370.js";const u=window.Cesium;class f{constructor(){this.init()}init(){window.viewer.entities.add({name:"Red cone",position:u.Cartesian3.fromDegrees(-105,40,2e5),cylinder:{length:4e5,topRadius:0,bottomRadius:2e5,material:u.Color.RED.withAlpha(.3)}})}getColorRamp(e,t=!0){let o=document.createElement("canvas");o.width=t?1:100,o.height=t?100:1;let i=o.getContext("2d"),r=e,a=t?i.createLinearGradient(0,0,0,100):i.createLinearGradient(0,0,100,0);return a.addColorStop(r[0],"rgb(231,12,12,0.2)"),a.addColorStop(r[1],"rgba(120,234,20,0.2)"),i.globalAlpha=.3,i.fillStyle=a,t?i.fillRect(0,0,1,100):i.fillRect(0,0,100,1),o}}class w{constructor(e){this.position=e.position,this.orientation=e.orientation,this.fov=e.fov||30,this.near=e.near||10,this.far=e.far||100,this.aspectRatio=e.aspectRatio,this.add()}update(e,t){this.position=e,this.orientation=t,this.add()}add(){this.clear(),this.addFrustum(),this.addOutline()}clear(){this.clearFrustum(),this.clearOutline()}clearFrustum(){this.frustumPrimitive&&(viewer.scene.primitives.remove(this.frustumPrimitive),this.frustumPrimitive=null)}clearOutline(){this.outlinePrimitive&&(viewer.scene.primitives.remove(this.outlinePrimitive),this.outlinePrimitive=null)}addFrustum(){let e=new Cesium.PerspectiveFrustum({fov:Cesium.Math.toRadians(this.fov),aspectRatio:this.aspectRatio,near:this.near,far:this.far}),t=new Cesium.FrustumGeometry({frustum:e,origin:this.position,orientation:this.orientation,vertexFormat:Cesium.VertexFormat.POSITION_ONLY}),o=new Cesium.GeometryInstance({geometry:t,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1,0,0,.5))}}),i=new Cesium.Primitive({geometryInstances:o,appearance:new Cesium.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1});this.frustumPrimitive=viewer.scene.primitives.add(i)}addOutline(){let e=new Cesium.PerspectiveFrustum({fov:Cesium.Math.toRadians(this.fov),aspectRatio:this.aspectRatio,near:this.near,far:this.far}),t=new Cesium.FrustumOutlineGeometry({frustum:e,origin:this.position,orientation:this.orientation,vertexFormat:Cesium.VertexFormat.POSITION_ONLY}),o=new Cesium.GeometryInstance({geometry:t,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1,1,0,1))}}),i=new Cesium.Primitive({geometryInstances:o,appearance:new Cesium.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1});this.outlinePrimitive=viewer.scene.primitives.add(i)}}const _={id:"cesiumContainer"},g={name:"GradientCone"},R=Object.assign(g,{setup(n){const e=window.Cesium,t=()=>{window.viewer=d("cesiumContainer"),window.viewer._cesiumWidget._creditContainer.style.display="none"},o=r=>viewer.entities.add({position:r,point:{pixelSize:10,color:new e.Color(1,1,0,1)}}),i=r=>{let a=e.Transforms.eastNorthUpToFixedFrame(r);viewer.scene.primitives.add(new e.DebugModelMatrixPrimitive({modelMatrix:a,length:3e4,width:3}))};return p(()=>{t(),new f;let r=e.Cartesian3.fromDegrees(120,30,100);o(r),i(r);let a=0,s=0,m=0,l=new e.HeadingPitchRoll(a,s,m),c=e.Quaternion.fromHeadingPitchRoll(l);viewer.camera.setView({destination:r,orientation:{heading:e.Math.toRadians(a),pitch:e.Math.toRadians(s),roll:e.Math.toRadians(m)}}),new w({position:r,orientation:c,fov:60,near:500,far:5e4,aspectRatio:5e4/5e4})}),(r,a)=>(C(),v("div",_))}});var I=h(R,[["__scopeId","data-v-116f8408"]]);export{I as default};
