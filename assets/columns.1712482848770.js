var j=Object.defineProperty;var B=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var O=(e,i,o)=>i in e?j(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,M=(e,i)=>{for(var o in i||(i={}))z.call(i,o)&&O(e,o,i[o]);if(B)for(var o of B(i))U.call(i,o)&&O(e,o,i[o]);return e};import{u as N,_ as D}from"./index.1712482848770.js";import{A as E}from"./aside.1712482848770.js";import{H as J,M as W}from"./main.1712482848770.js";import{d as P,h as x,az as q,aB as G,a1 as K,A as I,i as Q,l as X,ad as Y,aD as Z,ag as ee,k as te,n as se,a0 as d,o as p,a as y,W as m,P as k,b as h,F as ne,a5 as oe,J as C,V as F,O as b,T as R}from"./vue.1712482848770.js";import"./logo-mini.1712482848770.js";import"./parent.1712482848770.js";const le=P({name:"layoutColumnsAside",setup(){const e=x([]),i=x(),{proxy:o}=te(),c=N(),v=q(),H=G(),t=K({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[],isNavHover:!1}),_=I(()=>c.state.themeConfig.themeConfig.columnsAsideStyle),n=I(()=>c.state.themeConfig.themeConfig.columnsAsideLayout),r=s=>{t.liIndex=s,i.value.style.top=`${e.value[s].offsetTop+t.difference}px`},f=(s,l)=>{r(l);let{path:a,redirect:u}=s;u?H.push(u):H.push(a)},g=(s,l)=>{let{path:a}=s;t.liOldPath=a,t.liOldIndex=l,t.liHoverIndex=l,o.mittBus.emit("setSendColumnsChildren",A(a)),c.dispatch("routesList/setColumnsMenuHover",!1),c.dispatch("routesList/setColumnsNavHover",!0),t.isNavHover=!0},S=async()=>{await c.dispatch("routesList/setColumnsNavHover",!1),setTimeout(()=>{const{isColumnsMenuHover:s,isColumnsNavHover:l}=c.state.routesList;!s&&!l&&o.mittBus.emit("restoreDefault")},100)},L=s=>{se(()=>{r(s)})},T=()=>{t.columnsAsideList=$(c.state.routesList.routesList);const s=A(v.path);if(Object.keys(s).length<=0)return!1;L(s.item[0].k),o.mittBus.emit("setSendColumnsChildren",s)},A=s=>{const l=s.split("/");let a={};return t.columnsAsideList.map((u,V)=>{u.path===`/${l[1]}`&&(u.k=V,a.item=[M({},u)],a.children=[M({},u)],u.children&&(a.children=u.children))}),a},$=s=>s.filter(l=>!l.meta.isHide).map(l=>(l=Object.assign({},l),l.children&&(l.children=$(l.children)),l)),w=s=>{t.routeSplit=s.split("/"),t.routeSplit.shift();const l=`/${t.routeSplit[0]}`,a=t.columnsAsideList.find(u=>u.path===l);if(!a)return!1;setTimeout(()=>{L(a.k)},0)};return Q(c.state,s=>{if(s.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!s.routesList.isColumnsMenuHover&&!s.routesList.isColumnsNavHover)t.liHoverIndex=null,o.mittBus.emit("setSendColumnsChildren",A(v.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;o.mittBus.emit("setSendColumnsChildren",A(t.liOldPath))}}),X(()=>{T(),o.mittBus.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),Y(()=>{o.mittBus.off("restoreDefault",()=>{})}),Z(s=>{w(s.path),o.mittBus.emit("setSendColumnsChildren",A(s.path))}),M({columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:i,onColumnsAsideDown:L,setColumnsAsideStyle:_,setColumnsAsidelayout:n,onColumnsAsideMenuClick:f,onColumnsAsideMenuMouseenter:g,onColumnsAsideMenuMouseleave:S},ee(t))}}),ie={class:"layout-columns-aside"},ae=["onClick","onMouseenter","title"],re={class:"columns-vertical-title font12"},ue=["href"],ce={class:"columns-vertical-title font12"};function de(e,i,o,c,v,H){const t=d("SvgIcon"),_=d("el-scrollbar");return p(),y("div",ie,[m(_,null,{default:k(()=>[h("ul",{onMouseleave:i[0]||(i[0]=n=>e.onColumnsAsideMenuMouseleave())},[(p(!0),y(ne,null,oe(e.columnsAsideList,(n,r)=>(p(),y("li",{key:r,onClick:f=>e.onColumnsAsideMenuClick(n,r),onMouseenter:f=>e.onColumnsAsideMenuMouseenter(n,r),ref_for:!0,ref:f=>{f&&(e.columnsAsideOffsetTopRefs[r]=f)},class:C({"layout-columns-active":e.liIndex===r,"layout-columns-hover":e.liHoverIndex===r}),title:n.meta.title},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(p(),y("div",{key:0,class:C(e.setColumnsAsidelayout)},[m(t,{name:n.meta.icon},null,8,["name"]),h("div",re,F(n.meta.title&&n.meta.title.length>=4?n.meta.title.substr(0,e.setColumnsAsidelayout==="columns-vertical"?4:3):n.meta.title),1)],2)):(p(),y("div",{key:1,class:C(e.setColumnsAsidelayout)},[h("a",{href:n.meta.isLink,target:"_blank"},[m(t,{name:n.meta.icon},null,8,["name"]),h("div",ce,F(n.meta.title&&n.meta.title.length>=4?n.meta.title.substr(0,e.setColumnsAsidelayout==="columns-vertical"?4:3):n.meta.title),1)],8,ue)],2))],42,ae))),128)),h("div",{ref:"columnsAsideActiveRef",class:C(e.setColumnsAsideStyle)},null,2)],32)]),_:1})])}var me=D(le,[["render",de],["__scopeId","data-v-81c4d182"]]);const fe=P({name:"layoutColumns",components:{Aside:E,Header:J,Main:W,ColumnsAside:me},setup(){const e=N();return{isFixedHeader:I(()=>e.state.themeConfig.themeConfig.isFixedHeader)}}}),pe={class:"layout-columns-warp"};function he(e,i,o,c,v,H){const t=d("ColumnsAside"),_=d("Aside"),n=d("Header"),r=d("Main"),f=d("el-scrollbar"),g=d("el-container"),S=d("el-backtop");return p(),b(g,{class:"layout-container"},{default:k(()=>[m(t),h("div",pe,[m(_),m(g,{class:C(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:k(()=>[e.isFixedHeader?(p(),b(n,{key:0})):R("",!0),m(f,{class:C({"layout-backtop":e.isFixedHeader})},{default:k(()=>[e.isFixedHeader?R("",!0):(p(),b(n,{key:0})),m(r)]),_:1},8,["class"])]),_:1},8,["class"])]),m(S,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var Me=D(fe,[["render",he]]);export{Me as default};
